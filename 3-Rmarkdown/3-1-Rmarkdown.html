<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R + Markdown</title>
    <meta charset="utf-8" />
    <meta name="author" content="R. Burke Squires" />
    <meta name="date" content="2023-04-28" />
    <script src="libs/header-attrs-2.16/header-attrs.js"></script>
    <link rel="stylesheet" href="mckpam.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# R + Markdown
]
.subtitle[
## It is about time…
]
.author[
### R. Burke Squires
]
.date[
### April 28, 2023
]

---


# RMarkdown Basic Syntax and Formatting

- Introduction
- What is possible with R Markdown
- R Markdown vs Notebook vs Script
- How Does R Markdown Works?
- Basic Formatting
- Code Chunks
- Parameters
- Tables
- Images
- Advanced Features


---

# R Markdown Introduction

- R Markdown provides an authoring framework for data science

--

- You can use a single R Markdown file to both

  - Save and execute code

  - Generate high quality reports that can be shared

--

- R Markdown documents

  - Fully reproducible
  
  - Support dozens of static and dynamic output formats

---

# What is possible with R Markdown

- Lets see what is possible with R Markdown [Gallery](https://rmarkdown.rstudio.com/gallery.html).

--

- I suggest you download (and print) the [R Markdown cheatsheet](cheatsheeets/rmarkdown-reference.pdf)

---

# R Markdown vs Notebook vs Script

|                 | R Markdown | R Notebook  |  R Script | 
|-----------------|------------|:-----------:|----------:|
| Extension       | .Rmd       | .Rmd        | .R        |
| Run R code?     | Yes        | Yes         | Yes       |
| Narrative Text? | Yes        | Yes         | No        |
| Format output?  | Yes        | No          | No        |


- *R Notebook vs R Markdown*
  - Same file format - the difference is how YOU work with it.

- When you want to extract all R code from an R Markdown document, you can call the function `knitr::purl()`

---

# Difference between R Markdown and RNotebooks

- R Markdown documents are ‘knitted’, while R Notebooks are ‘previewed’.

- Notebook preview does not execute any code chunks, 
  - Only shows a rendered copy of the Markdown output with most recent chunk output. 
  - Preview is generated automatically whenever the notebook is saved. 

- Note: R Markdown Notebooks are only available in RStudio 1.0 or higher.

---

#	How Does R Markdown Works?

![How it works](images/rmarkdownflow.png)

- When you run render, R Markdown feeds the .Rmd file to `knitr`, which executes all of the code chunks and creates a new markdown (.md) document which includes the code and its output.

- The markdown file generated by `knitr` is then processed by `pandoc` which is responsible for creating the finished format.

- In short, rmarkdown::render() = knitr::knit() + Pandoc (+ LaTeX for PDF output only).

- May sound complicated, but R Markdown makes it simple...a single render function.


---

# Note

- Not all R Markdown documents are eventually compiled through Pandoc. 

- The intermediate .md file could be compiled by other Markdown renderers. Below are two examples:

- **Xaringan** package passes the .md output to a JavaScript library, which renders the Markdown content in the web browser.

- **Blogdown** package supports the .Rmarkdown document format, which is knitted to .markdown, and this Markdown document is usually rendered to HTML by an external site generator.

---

# Workflow

An example R Markdown workflow:

1. Open a **new .Rmd file** in the RStudio IDE by going to ~File &gt; New File &gt; R Markdown~
2. **Embed code** in chunks. Run code by line, by chunk, or all at once.
3. **Write text** and add tables, figures, images, and citations. Format with Markdown syntax or the RStudio Visual Markdown Editor.
4. **Set output format(s) and options** in the YAML header. Customize themes or add parameters to execute or add interactivity with Shiny.
5. **Save and render** the whole document. Knit periodically to preview your work as you write. 6. **Share your work!**


---

# Basic Formatting

Open `RStudio` -&gt; `File` -&gt; `New file` -&gt; `Rmarkdown` -&gt; Click `OK`

Notice that the file contains three types of content:

- An (optional) YAML header surrounded by three dashes
- R code chunks surrounded by three backticks
- Text mixed with simple text formatting

---

# Basic Formatting

**Header (YAML)**

- Three dashes (to open)
- Title
- Author
- Date
- Output format(s)(Used for compiling - multiple output formats can be written here!)
- Three dashes (to close)

**Body Options**

- Code Chunks
- Inline Code
- Parameters
- Tables
- Markdown


---

# Code Chunks

- **Goal:**

  - add R code to the document,

- *along with its output*.

- Go ahead

- To add a *chunk* of R code, type what you see below...

````
```{r}
2^(0:10)
```
````

or insert a chunk from the menu: `Code` -&gt; `Insert Chunk`

---

# Code Chunks: Adding in R

**Try it!**

- Powers of two?

````
```{r}
2^(0:10)
```
````

Powers of two?


```r
2^(0:10)
```

```
##  [1]    1    2    4    8   16   32   64  128  256  512 1024
```

---

# Code Chunks: Adding in R

````


```r
cumsum( 4 * (-1)^(0:20) / (2*(0:20)+1) )
```
````
--


```r
cumsum( 4 * (-1)^(0:20) / (2*(0:20)+1) )
```

```
##  [1] 4.000000 2.666667 3.466667 2.895238 3.339683 2.976046 3.283738 3.017072
##  [9] 3.252366 3.041840 3.232316 3.058403 3.218403 3.070255 3.208186 3.079153
## [17] 3.200366 3.086080 3.194188 3.091624 3.189185
```

---

# Code Chunks: Adding in R

````


```r
plot(cumsum( 4 * (-1)^(0:20) / (2*(0:20)+1) ))
abline(h=pi, col='red')
```
````

--


```r
plot(cumsum( 4 * (-1)^(0:20) / (2*(0:20)+1) ))
abline(h=pi, col='red')
```

![](3-1-Rmarkdown_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;


---

#Code Chunks vs Inline Code

**Options are set like: ```{r this-chunk-name, my-options-go-here=TRUE/FALSE}**

Common Options:
- **eval**: TRUE/FALSE - Whether to evaluate a code chunk.
- **echo**: TRUE/FALSE - Whether to echo the source code in the output document
- **results**: hide/asis - Set to 'hide’ text or simply output code just as it is written
- **warning, message, error**: TRUE/FALSE - Whether to show warnings, messages, and errors in the output
- **include**: TRUE/FALSE - Whether to include anything from a code chunk in the output document.  NOTE: include=FALSE means echo = FALSE, results = 'hide', warning = FALSE, and message = FALSE
- **out.width** and **out.height**: “No.%” – Page with of plot output e.g., out.width = '80%' means 80% of width
- **fig.align**: left/center/right - The alignment of plots
- **dev**: pdf/png/svg - The device format to record plots, usually 'pdf' for LaTeX, 'png’ for HTML output
- **fig.cap**: string - The figure caption

See more here: https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html

---

# Inline Code

- Code results can be inserted directly into the text of a .Rmd file by enclosing the code with `r `. The file below uses `r ` twice to call colorFunc, which returns “heat.colors.”


```r
colorfunc &lt;- "heat.colors"
# colorfunc &lt;- "terrain.colors"
```

Base R comes with many functions for generating colors. The code below demonstrates the heat.colors function.

---

# Code Languages

- `knitr` can execute code in many languages besides R. 

- Some of the available language engines include:
  - Python
  - SQL
  - Bash
  - Rcpp
  - JavaScript
  - CSS

- To process a code chunk using an alternate language engine, replace the r at the start of your chunk declaration with the name of the language


```bash
pwd
```

```
## /Users/burkesquires/Documents/GitHub/r-markdown-tutorial/3-Rmarkdown
```
- Note that chunk options like echo and results are all valid when using a language engine like python.

- Note, *except for python*, these sessions are closed at the end of each code chunk so variables do not persist throughout the document

https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html

---

# Code Languages

**Lets list some parts of the cell!**


```python
parts = ['nucleus','ribosome','plasma membrane','mitochondria','endoplasmic reticulum']
for p in parts:
    print(p)
```

```
## nucleus
## ribosome
## plasma membrane
## mitochondria
## endoplasmic reticulum
```

---

# Code Languages

**Lets list some types of bacteria by genus!**


```ruby
bacs = ['Micrococcus','Staphylococcus','Bacillus','Pseudomona']
bacs.each {|b| puts b}
```

```
## Micrococcus
## Staphylococcus
## Bacillus
## Pseudomona
```

---

# Parameters

Click [here](https://rstudio.cloud/project/181942) to open in RStudio.cloud

![parameters](images/params-1-hawaii.png){ width=75% height=75% }

---

# Parameters

R Markdown documents can include one or more parameters whose values can be set when you render the report. In the previous image, uses a data parameter that determines which data set to plot.

**Declaring Parameters**
Parameters are declared using the params field within the YAML header of the document. For example, the file above creates the parameter data and assigns it the default value "hawaii".

**Using Parameters in Code**
Parameters are made available within the knit environment as a read-only list named params. To access a parameter in code, call params$&lt;parameter name&gt;.

**Setting Parameters values**
Add a params argument to render to create a report that uses a new set of parameter values. Here we modify our report to use the aleutians data set with


---

# Tables

![Tables](images/tables-1-kable.png)

Check this out: https://www.tablesgenerator.com/markdown_tables

---

## Advanced Features
- Briefly discuss advanced features of RMarkdown, such as cross-referencing and citations.
- Provide resources for further learning and exploration.

---

## Questions?

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
